(function(a){function u(a){return i.nodeValue=a,h.innerHTML}function v(a){return j.innerHTML=a,j.innerText||j.textContent||""}function w(a){function f(f){var g,h;if(f&&(c=f),!b)return b=!0,a;if(c[k]||c==a){if(g=c.firstChild)return c!==a&&d.push(c),c=g;if(g=c[l])return e=c,c=g;for(;h=d.pop();)if(g=h[l])return e=h,c=g}else{for(;h=d.pop();)if(g=h[l])return e=h,c=g;if(e)return c=e[l]||null}return null}var e,b=!1,c=a,d=[];return f}function x(a,b,c){for(var h,j,l,d=c?a:a.cloneNode(!0),f=w(d),i=[];h=f(l);)l=null,h.nodeType==h.ELEMENT_NODE?(e.test(h.nodeName)&&i.push(h),l=A(h,b,b)):h.nodeType==h.COMMENT_NODE&&h[k].removeChild(h);for(;j=i.pop();)j[k].replaceChild(g.createTextNode(j.innerHTML),j);return d}function y(a){var b;if(null==a)return!0;if("object"==typeof a){if("length"in a&&0===a.length)return!0;for(b in a)if(d.call(a,b))return!1;return!0}return!1}function z(a,b,c){if(!a)return b;for(var i,d="/"==a.charAt(0)?c:b,e=a.split("."),f=0,g=e.length,h=d;g>f;f++)if(i=e[f],h=h[i],null==h)return null;return h}function A(a,e,h){var i,j,w;if(i=a[n](o),null!==i){if(j=z(i,e,h),!j||y(j))return a[k].removeChild(a),void 0;a[m](o)}if(i=a[n](p),null!==i){if(j=z(i,e,h),j&&!y(j))return a[k].removeChild(a),void 0;a[m](p)}if(i=a[n](q),null!==i){var A,B,C;if(j=z(i,e,h),null!=j&&"object"==typeof j){var D=g.createDocumentFragment();if(c.call(j)==b)for(A=0,B=j.length;B>A;A++)C=a.cloneNode(!0),C[m](q),D.appendChild(x(C,j[A],!0));else{A=0;for(A in j)d.call(j,A)&&(C=a.cloneNode(!0),C[m](q),D.appendChild(x(C,j[A],!0)))}return w=a[l],a[k].insertBefore(D,a),a[k].removeChild(a),w}}if(i=a[n](r),null!==i&&(j=z(i,e,h),null!=j&&(a.hasAttribute("data-escape")&&(j=u(j)),a.hasAttribute("data-strip")&&(j=v(j)),a[m](r),a.innerHTML=j||"")),i=a[n](s),null!==i)return j=z(i,e,h),w=a[l],a[m](s),x(a,j,!0),w;if(i=a[n](t),null!==i){i=i.split(".");var G,E=i.length,F=function(a,b){return z(b,e,h)||null};for(a[m](t);E--;)G=a[n](i[E]),G&&a.setAttribute(i[E],G.replace(f,F))}}var b="[object Array]",c={}.toString,d={}.hasOwnProperty,e=/^txt$/i,f=/#{([^\}]+)\}/g,g=a.document,h=g.createElement("div"),i=g.createTextNode(""),j=g.createElement("div"),k="parentNode",l="nextSibling",m="removeAttribute",n="getAttribute",o="data-if",p="data-unless",q="data-each",r="data-value",s="data-with",t="data-attrs";h.appendChild(i),g.createElement("txt"),a.evaluate=x})(this.window);