(function(a){function z(a,b){w++,v[a]=b}function A(a){w--,delete v[a]}function B(a){return h.nodeValue=a,g.innerHTML}function C(a){return i.innerHTML=a,i.innerText||i.textContent||""}function D(a){function f(f){var g,h;if(f&&(c=f),!b)return b=!0,a;if(c[j]||c==a){if(g=c.firstChild)return c!==a&&d.push(c),c=g;if(g=c[k])return e=c,c=g;for(;h=d.pop();)if(g=h[k])return e=h,c=g}else{for(;h=d.pop();)if(g=h[k])return e=h,c=g;if(e)return c=e[k]||null}return null}var e,b=!1,c=a,d=[];return f}function E(a,b,c,d){for(var h,k,l,e=c?a:a.cloneNode(!0),g=D(e),i=[];h=g(l);)l=null,h.nodeType==h.ELEMENT_NODE?(h.hasAttribute(u)&&i.push(h),l=H(h,b,d||b)):h.nodeType==h.COMMENT_NODE&&h[j].removeChild(h);for(;k=i.pop();)k[j].replaceChild(f.createTextNode(k.innerHTML),k);return e}function F(a){var b;if(null==a)return!0;if("object"==typeof a){if("length"in a&&0===a.length)return!0;for(b in a)if(d.call(a,b))return!1;return!0}return!1}function G(a,b,c){if(!a)return b;for(var j,d="/"==a.charAt(0),e=d?c:b,f=d?a.slice(1).split("."):a.split("."),g=0,h=f.length,i=e;h>g;g++)if(j=f[g],i=i[j],null==i)return null;return i}function H(a,g,h){var i,u,z;if(a.attributes.length&&(!x||!y||Object.keys(a.dataset).length)){if(i=a[m](o),null!==i){if(u=G(i,g,h),!u||F(u))return a[j].removeChild(a),void 0;a[l](o)}if(i=a[m](p),null!==i){if(u=G(i,g,h),u&&!F(u))return a[j].removeChild(a),void 0;a[l](p)}if(i=a[m](q),null!==i){var A,D,H;if(u=G(i,g,h),null!=u&&"object"==typeof u){var I=f.createDocumentFragment();if(c.call(u)==b)for(A=0,D=u.length;D>A;A++)H=a.cloneNode(!0),H[l](q),I.appendChild(E(H,u[A],!0,h));else{A=0;for(A in u)d.call(u,A)&&(H=a.cloneNode(!0),H[l](q),I.appendChild(E(H,u[A],!0,h)))}return z=a[k],a[j].insertBefore(I,a),a[j].removeChild(a),z}}if(i=a[m](r),null!==i&&(u=G(i,g,h),null!=u&&(a[n]("data-escape")&&(u=B(u)),a[n]("data-strip")&&(u=C(u)),a[l](r),a.innerHTML=u||"")),i=a[m](s),null!==i)return u=G(i,g,h),z=a[k],a[l](s),E(a,u,!0),z;if(i=a[m](t),null!==i){i=i.split(".");var L,J=i.length,K=function(a,b){return G(b,g,h)||null};for(a[l](t);J--;)L=a[m](i[J]),L&&a.setAttribute(i[J],L.replace(e,K))}var M;if(w)for(M in v)d.call(v,M)&&(i=a[m]("data-"+M),null!==i&&(a[l]("data-"+M),v[M](a,i,g,h)))}}var b="[object Array]",c={}.toString,d={}.hasOwnProperty,e=/#{([^\}]+)\}/g,f=a.document,g=f.createElement("div"),h=f.createTextNode(""),i=f.createElement("div"),j="parentNode",k="nextSibling",l="removeAttribute",m="getAttribute",n="hasAttribute",o="data-if",p="data-unless",q="data-each",r="data-value",s="data-with",t="data-attrs",u="data-textnode",v={},w=0,x="object"==typeof document.createElement("div").dataset,y="function"==typeof Object.keys;g.appendChild(h),f.createElement("txt"),E.addCustomHelper=z,E.removeCustomHelper=A,a.evaluate=E})(this.window);