(function(a){function F(a,b){B++,A[a]=b}function G(a){B--,A[a]=E}function H(a){return j.nodeValue=a,i.innerHTML}function I(a){return k.innerHTML=a,k.innerText||k.textContent||h}function J(a){function f(f){var g,h;if(f&&(c=f),!b)return b=!0,a;if(c[l]||c==a){if(g=c.firstChild)return c!==a&&d.push(c),c=g;if(g=c[m])return e=c,c=g;for(;h=d.pop();)if(g=h[m])return e=h,c=g}else{for(;h=d.pop();)if(g=h[m])return e=h,c=g;if(e)return c=e[m]||E}return E}var e,b=!1,c=a,d=[];return f}function K(a,b,c,d){for(var h,j,k,e=c?a:a[q](!0),f=J(e),i=[];h=f(k);)k=E,h.nodeType==h.ELEMENT_NODE?(h.hasAttribute(y)&&i.push(h),k=N(h,b,d||b)):h.nodeType==h.COMMENT_NODE&&h[l].removeChild(h);for(;j=i.pop();)j[l].replaceChild(g.createTextNode(j.innerHTML),j);return e}function L(a){var b;if(a==E)return!0;if(typeof a==c){if("length"in a&&0===a.length)return!0;for(b in a)if(e.call(a,b))return!1;return!0}return!1}function M(a,b,c){if(!a)return b;for(var j,d="/"==a.charAt(0),e=d?c:b,f=d?a.slice(1).split("."):a.split("."),g=0,h=f.length,i=e;h>g;g++)if(j=f[g],i=i[j],i==E)return E;return i}function N(a,i,j){var k,y,F;if(a.attributes.length&&(!C||!D||Object.keys(a.dataset).length)){if(k=a[o](s),k!==E){if(y=M(k,i,j),!y||L(y))return a[l].removeChild(a),void 0;a[n](s)}if(k=a[o](t),k!==E){if(y=M(k,i,j),y&&!L(y))return a[l].removeChild(a),void 0;a[n](t)}if(k=a[o](u),k!==E){var G,J,N;if(y=M(k,i,j),y!=E&&typeof y==c){var O=g.createDocumentFragment();if(d.call(y)==b)for(G=0,J=y.length;J>G;G++)N=a[q](!0),N[n](u),O.appendChild(K(N,y[G],!0,j));else{G=0;for(G in y)e.call(y,G)&&(N=a[q](!0),N[n](u),O.appendChild(K(N,y[G],!0,j)))}return F=a[m],a[l].insertBefore(O,a),a[l].removeChild(a),F}}if(k=a[o](v),k!==E&&(y=M(k,i,j),y!=E&&(a[p](r+"escape")&&(y=H(y)),a[p](r+"strip")&&(y=I(y)),a[n](v),a.innerHTML=y||h)),k=a[o](z),k!==E){var P=function(a,b){return M(b,i,j)||h};a.innerHTML=k.replace(f,P)}if(k=a[o](w),k!==E)return y=M(k,i,j),F=a[m],a[n](w),K(a,y,!0),F;if(k=a[o](x),k!==E){k=k.split(".");var S,Q=k.length,R=function(a,b){return M(b,i,j)||h};for(a[n](x);Q--;)S=a[o](k[Q]),S&&a.setAttribute(k[Q],S.replace(f,R))}var T;if(B)for(T in A)e.call(A,T)&&A[T]!=E&&(k=a[o](r+T),k!==E&&(a[n](r+T),A[T](a,k,i,j)))}}var b="[object Array]",c="object",d={}.toString,e={}.hasOwnProperty,f=/#{([^\}]+)\}/g,g=a.document,h="",i=g.createElement("div"),j=g.createTextNode(h),k=g.createElement("div"),l="parentNode",m="nextSibling",n="removeAttribute",o="getAttribute",p="hasAttribute",q="cloneNode",r="data-",s=r+"if",t=r+"unless",u=r+"each",v=r+"value",w=r+"with",x=r+"attrs",y=r+"textnode",z=r+"content",A={},B=0,C=typeof document.createElement("div").dataset==c,D="function"==typeof Object.keys,E=null;i.appendChild(j),K.addCustomHelper=F,K.removeCustomHelper=G,a.evaluate=K})(this.window);