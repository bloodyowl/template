(function(a){function H(a,b){D++,C[a]=b}function I(a){D--,C[a]=G}function J(a){return l.nodeValue=a,k.innerHTML}function K(a){return m.innerHTML=a,m.innerText||m.textContent||h}function L(a){function f(f){var g,h;if(f&&(c=f),!b)return b=!0,a;if(c[n]||c==a){if(g=c.firstChild)return c!==a&&d.push(c),c=g;if(g=c[o])return e=c,c=g;for(;h=d.pop();)if(g=h[o])return e=h,c=g}else{for(;h=d.pop();)if(g=h[o])return e=h,c=g;if(e)return c=e[o]||G}return G}var e,b=!1,c=a,d=[];return f}function M(a,b,c,d){for(var h,k,l,e=c?a:a[s](!0),f=L(e),i=[];h=f(l);)l=G,h.nodeType==h.ELEMENT_NODE?(h.hasAttribute(A)&&i.push(h),l=P(h,b,d||b)):h.nodeType==h.COMMENT_NODE&&h[n].removeChild(h);for(;k=i.pop();)k[n].replaceChild(g[j](k.innerHTML),k);return e}function N(a){var b;if(a==G)return!0;if(typeof a==c){if("length"in a&&0===a.length)return!0;for(b in a)if(e.call(a,b))return!1;return!0}return!1}function O(a,b,c){if(!a)return b;for(var j,d="/"==a.charAt(0),e=d?c:b,f=d?a.slice(1).split("."):a.split("."),g=0,h=f.length,i=e;h>g;g++)if(j=f[g],i=i[j],i==G)return G;return i}function P(a,i,j){var k,l,m;if(a.attributes.length&&(!E||!F||Object.keys(a.dataset).length)){if(k=a[q](u),k!==G){if(l=O(k,i,j),!l||N(l))return a[n].removeChild(a),void 0;a[p](u)}if(k=a[q](v),k!==G){if(l=O(k,i,j),l&&!N(l))return a[n].removeChild(a),void 0;a[p](v)}if(k=a[q](w),k!==G){var A,H,I;if(l=O(k,i,j),l!=G&&typeof l==c){var L=g.createDocumentFragment();if(d.call(l)==b)for(A=0,H=l.length;H>A;A++)I=a[s](!0),I[p](w),L.appendChild(M(I,l[A],!0,j));else{A=0;for(A in l)e.call(l,A)&&(I=a[s](!0),I[p](w),L.appendChild(M(I,l[A],!0,j)))}return m=a[o],a[n].insertBefore(L,a),a[n].removeChild(a),m}}if(k=a[q](x),k!==G&&(l=O(k,i,j),l!=G&&(a[r](t+"escape")&&(l=J(l)),a[r](t+"strip")&&(l=K(l)),a[p](x),a.innerHTML=l||h)),k=a[q](B),k!==G){var P=function(a,b){return O(b,i,j)||h};a.innerHTML=k.replace(f,P)}if(k=a[q](y),k!==G)return l=O(k,i,j),m=a[o],a[p](y),M(a,l,!0),m;if(k=a[q](z),k!==G){k=k.split(".");var S,Q=k.length,R=function(a,b){return O(b,i,j)||h};for(a[p](z);Q--;)S=a[q](k[Q]),S&&a.setAttribute(k[Q],S.replace(f,R))}var T;if(D)for(T in C)e.call(C,T)&&C[T]!=G&&(k=a[q](t+T),k!==G&&(a[p](t+T),C[T](a,k,i,j)))}}var b="[object Array]",c="object",d={}.toString,e={}.hasOwnProperty,f=/#{([^\}]+)\}/g,g=a.document,h="",i="createElement",j="createTextNode",k=g[i]("div"),l=g[j](h),m=g[i]("div"),n="parentNode",o="nextSibling",p="removeAttribute",q="getAttribute",r="hasAttribute",s="cloneNode",t="data-",u=t+"if",v=t+"unless",w=t+"each",x=t+"value",y=t+"with",z=t+"attrs",A=t+"textnode",B=t+"content",C={},D=0,E=typeof g[i]("div").dataset==c,F="function"==typeof Object.keys,G=null;k.appendChild(l),M.addCustomHelper=H,M.removeCustomHelper=I,a.evaluate=M})(this.window);