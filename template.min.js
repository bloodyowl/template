(function(a){function x(a,b){w++,v[a]=b}function y(a){w--,delete v[a]}function z(a){return h.nodeValue=a,g.innerHTML}function A(a){return i.innerHTML=a,i.innerText||i.textContent||""}function B(a){function f(f){var g,h;if(f&&(c=f),!b)return b=!0,a;if(c[j]||c==a){if(g=c.firstChild)return c!==a&&d.push(c),c=g;if(g=c[k])return e=c,c=g;for(;h=d.pop();)if(g=h[k])return e=h,c=g}else{for(;h=d.pop();)if(g=h[k])return e=h,c=g;if(e)return c=e[k]||null}return null}var e,b=!1,c=a,d=[];return f}function C(a,b,c,d){for(var h,k,l,e=c?a:a.cloneNode(!0),g=B(e),i=[];h=g(l);)l=null,h.nodeType==h.ELEMENT_NODE?(h.hasAttribute(u)&&i.push(h),l=F(h,b,d||b)):h.nodeType==h.COMMENT_NODE&&h[j].removeChild(h);for(;k=i.pop();)k[j].replaceChild(f.createTextNode(k.innerHTML),k);return e}function D(a){var b;if(null==a)return!0;if("object"==typeof a){if("length"in a&&0===a.length)return!0;for(b in a)if(d.call(a,b))return!1;return!0}return!1}function E(a,b,c){if(!a)return b;for(var j,d="/"==a.charAt(0),e=d?c:b,f=d?a.slice(1).split("."):a.split("."),g=0,h=f.length,i=e;h>g;g++)if(j=f[g],i=i[j],null==i)return null;return i}function F(a,g,h){var i,u,x;if(i=a[m](o),null!==i){if(u=E(i,g,h),!u||D(u))return a[j].removeChild(a),void 0;a[l](o)}if(i=a[m](p),null!==i){if(u=E(i,g,h),u&&!D(u))return a[j].removeChild(a),void 0;a[l](p)}if(i=a[m](q),null!==i){var y,B,F;if(u=E(i,g,h),null!=u&&"object"==typeof u){var G=f.createDocumentFragment();if(c.call(u)==b)for(y=0,B=u.length;B>y;y++)F=a.cloneNode(!0),F[l](q),G.appendChild(C(F,u[y],!0,h));else{y=0;for(y in u)d.call(u,y)&&(F=a.cloneNode(!0),F[l](q),G.appendChild(C(F,u[y],!0,h)))}return x=a[k],a[j].insertBefore(G,a),a[j].removeChild(a),x}}if(i=a[m](r),null!==i&&(u=E(i,g,h),null!=u&&(a[n]("data-escape")&&(u=z(u)),a[n]("data-strip")&&(u=A(u)),a[l](r),a.innerHTML=u||"")),i=a[m](s),null!==i)return u=E(i,g,h),x=a[k],a[l](s),C(a,u,!0),x;if(i=a[m](t),null!==i){i=i.split(".");var J,H=i.length,I=function(a,b){return E(b,g,h)||null};for(a[l](t);H--;)J=a[m](i[H]),J&&a.setAttribute(i[H],J.replace(e,I))}var K;if(w)for(K in v)d.call(v,K)&&(i=a[m]("data-"+K),null!==i&&(a[l]("data-"+K),v[K](a,i,g,h)))}var b="[object Array]",c={}.toString,d={}.hasOwnProperty,e=/#{([^\}]+)\}/g,f=a.document,g=f.createElement("div"),h=f.createTextNode(""),i=f.createElement("div"),j="parentNode",k="nextSibling",l="removeAttribute",m="getAttribute",n="hasAttribute",o="data-if",p="data-unless",q="data-each",r="data-value",s="data-with",t="data-attrs",u="data-textnode",v={},w=0;g.appendChild(h),f.createElement("txt"),C.addCustomHelper=x,C.removeCustomHelper=y,a.evaluate=C})(this.window);