(function(a){function A(a,b){w++,v[a]=b}function B(a){w--,v[a]=z}function C(a){return h.nodeValue=a,g.innerHTML}function D(a){return i.innerHTML=a,i.innerText||i.textContent||""}function E(a){function f(f){var g,h;if(f&&(c=f),!b)return b=!0,a;if(c[j]||c==a){if(g=c.firstChild)return c!==a&&d.push(c),c=g;if(g=c[k])return e=c,c=g;for(;h=d.pop();)if(g=h[k])return e=h,c=g}else{for(;h=d.pop();)if(g=h[k])return e=h,c=g;if(e)return c=e[k]||z}return z}var e,b=!1,c=a,d=[];return f}function F(a,b,c,d){for(var h,k,l,e=c?a:a.cloneNode(!0),g=E(e),i=[];h=g(l);)l=z,h.nodeType==h.ELEMENT_NODE?(h.hasAttribute(u)&&i.push(h),l=I(h,b,d||b)):h.nodeType==h.COMMENT_NODE&&h[j].removeChild(h);for(;k=i.pop();)k[j].replaceChild(f.createTextNode(k.innerHTML),k);return e}function G(a){var b;if(a==z)return!0;if("object"==typeof a){if("length"in a&&0===a.length)return!0;for(b in a)if(d.call(a,b))return!1;return!0}return!1}function H(a,b,c){if(!a)return b;for(var j,d="/"==a.charAt(0),e=d?c:b,f=d?a.slice(1).split("."):a.split("."),g=0,h=f.length,i=e;h>g;g++)if(j=f[g],i=i[j],i==z)return z;return i}function I(a,g,h){var i,u,A;if(a.attributes.length&&(!x||!y||Object.keys(a.dataset).length)){if(i=a[m](o),i!==z){if(u=H(i,g,h),!u||G(u))return a[j].removeChild(a),void 0;a[l](o)}if(i=a[m](p),i!==z){if(u=H(i,g,h),u&&!G(u))return a[j].removeChild(a),void 0;a[l](p)}if(i=a[m](q),i!==z){var B,E,I;if(u=H(i,g,h),u!=z&&"object"==typeof u){var J=f.createDocumentFragment();if(c.call(u)==b)for(B=0,E=u.length;E>B;B++)I=a.cloneNode(!0),I[l](q),J.appendChild(F(I,u[B],!0,h));else{B=0;for(B in u)d.call(u,B)&&(I=a.cloneNode(!0),I[l](q),J.appendChild(F(I,u[B],!0,h)))}return A=a[k],a[j].insertBefore(J,a),a[j].removeChild(a),A}}if(i=a[m](r),i!==z&&(u=H(i,g,h),u!=z&&(a[n]("data-escape")&&(u=C(u)),a[n]("data-strip")&&(u=D(u)),a[l](r),a.innerHTML=u||"")),i=a[m](s),i!==z)return u=H(i,g,h),A=a[k],a[l](s),F(a,u,!0),A;if(i=a[m](t),i!==z){i=i.split(".");var M,K=i.length,L=function(a,b){return H(b,g,h)||z};for(a[l](t);K--;)M=a[m](i[K]),M&&a.setAttribute(i[K],M.replace(e,L))}var N;if(w)for(N in v)d.call(v,N)&&v[N]!=z&&(i=a[m]("data-"+N),i!==z&&(a[l]("data-"+N),v[N](a,i,g,h)))}}var b="[object Array]",c={}.toString,d={}.hasOwnProperty,e=/#{([^\}]+)\}/g,f=a.document,g=f.createElement("div"),h=f.createTextNode(""),i=f.createElement("div"),j="parentNode",k="nextSibling",l="removeAttribute",m="getAttribute",n="hasAttribute",o="data-if",p="data-unless",q="data-each",r="data-value",s="data-with",t="data-attrs",u="data-textnode",v={},w=0,x="object"==typeof document.createElement("div").dataset,y="function"==typeof Object.keys,z=null;g.appendChild(h),F.addCustomHelper=A,F.removeCustomHelper=B,a.evaluate=F})(this.window);